---

## **WaveFragStudio 声学相机应用 - 用户手册**

**版本 V1.0.5**

### **目录**

1.  [软件简介与安装](#1-软件简介与安装)
    *   [1.1 功能概述](#11-功能概述)
    *   [1.2 系统要求](#12-系统要求)
    *   [1.3 软件安装](#13-软件安装)
2.  [首次使用快速入门指南](#2-首次使用快速入门指南)
    *   [步骤一：硬件连接](#步骤一硬件连接)
    *   [步骤二：软件激活](#步骤二软件激活)
    *   [步骤三：加载麦克风阵列文件](#步骤三加载麦克风阵列文件)
    *   [步骤四：检查网络配置](#步骤四检查网络配置)
    *   [步骤五：启动系统与观察](#步骤五启动系统与观察)
3.  [界面功能详解](#3-界面功能详解)
    *   [3.1 主界面概览](#31-主界面概览)
    *   [3.2 主控制区](#32-主控制区)
    *   [3.3 硬件激活与连接区](#33-硬件激活与连接区)
    *   [3.4 算法参数控制区](#34-算法参数控制区)
    *   [3.5 通道数据显示区](#35-通道数据显示区)
    *   [3.6 系统日志区](#36-系统日志区)
4.  [高级功能与设置](#4-高级功能与设置)
    *   [4.1 网络参数设置](#41-网络参数设置)
    *   [4.2 滤波器参数设置](#42-滤波器参数设置)
5.  [故障排除与常见问题 (FAQ)](#5-故障排除与常见问题-faq)
6.  [重要注意事项](#6-重要注意事项)

---

### **1. 软件简介与安装**

#### **1.1 功能概述**

欢迎使用 WaveFragStudio 声学相机应用！本软件是一款专业的声学分析工具，旨在将人耳听不见或难以定位的声音“可视化”。通过连接专用的麦克风阵列硬件和摄像头，本软件能够实时处理多通道音频信号，并通过先进的波束形成算法，在视频画面上以彩色热图的形式标示出声源的位置和强度。

主要应用场景包括：
*   工业设备异响检测与定位。
*   高压设备放电、气体泄漏检测。
*   建筑声学分析。
*   环境噪声源识别等。

#### **1.2 系统要求**

*   **操作系统**: Windows 10 或更高版本 (64位)。
*   **硬件接口**:
    *   至少一个可用的 USB 2.0/3.0 接口，用于连接摄像头。
    *   至少一个可用的 USB 接口，用于连接声学采集硬件的控制端口 (通常识别为COM串口)。
    *   一个以太网接口，用于接收来自声学采集硬件的数据流。
*   **硬件设备**:
    *   WaveFragStudio 配套的声学采集硬件。
    *   一个标准的USB摄像头。

#### **1.3 软件安装**

1.  找到您获取的安装程序文件，通常名为 `WaveFragStudio_Setup.exe`。
2.  双击运行安装程序。
3.  按照屏幕上的提示进行操作，通常只需点击“下一步”即可。
4.  安装完成后，桌面上会自动创建一个名为 “WaveFragStudio” 的快捷方式。
5.  双击桌面快捷方式即可启动软件。首次启动时，软件界面大部分功能是灰色不可用的，需要先进行激活。

### **2. 首次使用快速入门指南**

请按照以下步骤，一步步完成软件的首次配置和启动。

#### **步骤一：硬件连接**

在启动软件前，请确保所有硬件设备已正确连接至您的电脑：
1.  **连接声学采集硬件**: 使用USB线将采集硬件的控制端口连接到电脑的USB口。Windows系统会自动安装驱动并为其分配一个COM端口号。
2.  **连接数据网线**: 使用网线将采集硬件的数据端口连接到您电脑的以太网口。
3.  **连接摄像头**: 将USB摄像头连接到电脑的另一个USB口。
4.  **为采集硬件供电**: 接通采集硬件的电源。

#### **步骤二：软件激活**

首次运行软件需要激活，以将其与您的硬件绑定。
1.  启动 WaveFragStudio 软件。
2.  在 **[硬件激活]** 区域，点击 **[COM端口]** 下拉菜单，选择您的采集硬件所对应的COM端口。如果不确定是哪一个，可以拔插一下硬件，然后点击 **[刷新]** 按钮，观察列表的变化来确定。通常描述中会包含 "USB-SERIAL" 或类似的字样。
3.  点击 **[启动系统]** 按钮。由于是首次使用，软件会弹出一个“软件激活”对话框。
4.  在弹出的对话框中，输入由供应商提供给您的**激活密钥 (口令)**。
5.  点击“确定”。如果密钥正确，软件会提示“密钥有效！”或“软件解锁成功”，同时主界面的其他按钮（如频率控制、动态范围等）将变为可用状态。激活过程只需进行一次，之后启动软件会自动验证。

> **提示**: 激活成功后，会在软件目录下生成一个 `license.key` 文件。请勿删除或修改此文件。

#### **步骤三：加载麦克风阵列文件**

为了让软件正确计算声源位置，您必须告诉它麦克风的物理布局。
1.  点击软件左上角的 **[文件]** 菜单，然后选择 **[打开麦克风位置文件...]**。
2.  在弹出的窗口中，选择由供应商提供的麦克风阵列位置文件（通常是一个 `.csv` 格式的文件）。
3.  加载成功后，日志区会显示“加载成功，共 XX 个通道”，并且 **[启动系统]** 按钮会变为可用状态。软件的标题栏也会显示当前加载的文件名。

> **什么是麦克风位置文件？**
> 这是一个文本文件，记录了每一个麦克风相对于阵列中心的精确坐标。软件需要这些信息来计算声音到达每个麦克风的微小时间差，从而定位声源。

#### **步骤四：检查网络配置**

软件需要知道从哪个网络端口接收硬件发送过来的音频数据。
1.  点击主控制区的 **[网络设置]** 按钮。
2.  在弹出的“网络参数设置”对话框中，首先点击左侧的 **[读取参数]** 按钮。
3.  软件会通过COM口从硬件中读取其当前的网络配置，并显示在左侧的文本框中。请特别关注 **[目标IP]** 和 **[目标端口]** 这两项。
    *   **目标IP**: 应该是您电脑的IP地址。
    *   **目标端口**: 这是硬件发送数据、软件需要监听的端口号。
4.  如果读取出的参数不正确，或者您需要修改，请在右侧“写入硬件”区域填入正确的参数，然后点击 **[下载参数]**。**（注意：下载新参数后，必须重启采集硬件才能生效！）**
5.  确认参数无误后，关闭此对话框。

#### **步骤五：启动系统与观察**

完成以上所有准备工作后，就可以正式启动系统了。
1.  点击主界面上的 **[启动系统]** 按钮，按钮会变为 **[停止系统]**，状态标签会显示“状态: 已激活 - 运行中”。
2.  此时，您应该能看到：
    *   右侧的视频窗口显示摄像头捕捉的实时画面。
    *   左侧的时域图和频谱图开始动态刷新，显示麦克风接收到的信号波形。
    *   当有明显声源出现时（例如您拍手、播放特定频率的声音），视频画面上会叠加一层彩色热图，最亮的区域即为识别出的声源位置。

恭喜您！您已成功完成 WaveFragStudio 的首次配置与运行。

### **3. 界面功能详解**

#### **3.1 主界面概览**

软件主界面分为六个主要区域：

1.  **主视频/热图显示区**: 实时显示摄像头画面及叠加的声学热图。
2.  **主控制区**: 控制系统的启停、算法切换和高级设置。
3.  **硬件激活与连接区**: 用于软件激活和与硬件建立控制连接。
4.  **算法参数控制区**: 调整波束形成算法的关键参数。
5.  **通道数据显示区**: 以图形方式展示麦克风接收到的原始信号。
6.  **系统日志区**: 显示软件运行状态、操作记录和潜在的错误信息。

#### **3.2 主控制区**

*   **启动/停止系统**: 控制数据处理和显示的开关。
*   **切换到时域/频域算法**:
    *   **频域算法 (默认)**: 对特定频率的声音定位最精确，适用于稳定、单一频率的声源（如电机啸叫、设备谐波）。需要配合下方的“目标频率控制”使用。
    *   **时域算法**: 对宽频带、瞬态的声音（如敲击声、泄漏声）定位效果更好，无需设置特定频率。
*   **网络设置**: 打开“网络参数设置”对话框，用于配置硬件的网络参数。
*   **滤波器参数设置**: 打开“滤波器参数设置”对话框，用于上传硬件滤波器系数（高级功能，通常由技术支持指导操作）。
*   **状态标签**: 显示软件当前的工作状态。

#### **3.3 硬件激活与连接区**

*   **COM端口**: 下拉列表，显示当前电脑上所有可用的串口设备。请选择与声学采集硬件对应的端口。
*   **刷新**: 点击可重新扫描并列出电脑上的COM端口。

#### **3.4 算法参数控制区**

*   **目标频率控制 (仅频域模式可用)**:
    *   当使用频域算法时，通过拖动滑块或在输入框中直接输入数值，来设定您想定位的声音频率（单位：Hz）。
    *   频谱图上会有一条红色竖线指示当前的目标频率。
*   **动态范围控制**:
    *   控制热图的显示范围（单位：dB）。数值越小，热图对比度越高，只显示最强的声源；数值越大，热图会显示更多较弱的声源细节。
    *   可以把它理解为热图的“灵敏度”或“对比度”调节。

#### **3.5 通道数据显示区**

*   **显示视图**:
    *   **多通道概览 (默认)**: 同时显示多个（最多16个）有代表性的通道信号波形（蓝色）以及所有通道的平均波形（红色）。便于观察整个阵列的总体信号情况。
    *   **通道 N**: 选择后，仅显示指定单个通道的详细信号波形。
*   **时域图**: 上方的绘图区，显示声音信号随时间变化的波形（幅值-时间）。
*   **频谱图**: 下方的绘图区，显示声音信号在不同频率上的能量分布（幅值-频率）。

#### **3.6 系统日志区**

这是一个非常重要的诊断工具。它会记录软件的每一步关键操作，如加载文件、启动系统、连接硬件、读取参数等。当软件出现问题时，日志区的信息是判断问题原因的重要依据。

### **4. 高级功能与设置**

#### **4.1 网络参数设置**

此功能用于配置采集硬件的网络通信参数，确保它能将数据正确发送到运行本软件的电脑上。

*   **如何操作**:
    1.  点击 **[网络设置]** 按钮。
    2.  **读取**: 点击 **[读取参数]** 可查看硬件当前的配置。
    3.  **写入**: 在右侧的输入框中填入新的参数。
        *   `设备MAC/IP`: 采集硬件自身的MAC和IP地址。
        *   `目标MAC/IP`: 运行本软件的电脑的MAC和IP地址。
        *   `源端口/目标端口`: 数据包的发送和接收端口。通常只需关心 **目标端口**，确保它与您电脑防火墙设置不冲突。
    4.  点击 **[下载参数]** 将新配置写入硬件。
    5.  **【重要】** 写入成功后，对话框会提示您 **重启采集硬件**，新的网络设置才会生效。

#### **4.2 滤波器参数设置**

此功能用于向硬件写入数字滤波器系数，以优化信号质量。这是一个非常专业的功能，**普通用户请勿随意修改**。

*   **如何操作**:
    *   仅在技术支持人员的指导下，将他们提供的162字节十六进制字符串粘贴到左侧的文本框中，然后点击 **[上传系数]**。
    *   点击 **[读取系数]** 可查看硬件中当前存储的系数，用于验证上传是否成功。

### **5. 故障排除与常见问题 (FAQ)**

**Q1: 点击“启动系统”后，软件没反应，或者提示激活失败。**
*   **A1**:
    1.  **检查COM端口**: 确认在 **[硬件激活]** 区选择了正确的COM端口。如果不确定，尝试拔插硬件后点击 **[刷新]** 再选择。
    2.  **检查硬件连接**: 确保采集硬件的USB控制线已牢固连接到电脑，并且硬件已通电。
    3.  **密钥错误**: 如果是首次激活，请确认您输入的激活密钥完全正确。
    4.  **驱动问题**: 在Windows的“设备管理器”中查看COM端口是否被正确识别，有无黄色感叹号。

**Q2: “启动系统”按钮是灰色的，无法点击。**
*   **A2**: 这是因为您还没有加载麦克风阵列文件。请通过 **[文件] -> [打开麦克风位置文件...]** 菜单加载一个 `.csv` 阵列文件后，按钮即可使用。

**Q3: 启动系统后，右侧只有黑色画面，没有摄像头视频。**
*   **A3**:
    1.  **检查摄像头连接**: 确保USB摄像头已连接到电脑，并且工作正常（可以先用Windows自带的相机应用测试）。
    2.  **摄像头被占用**: 确保没有其他程序（如QQ、Skype、Teams）正在使用该摄像头。
    3.  **权限问题**: 某些系统可能会限制应用访问摄像头，请检查系统隐私设置。
    4.  **兼容性**: 尝试更换一个不同型号的USB摄像头。

**Q4: 启动后有视频画面，但左侧的波形图不动，也没有热图。**
*   **A4**: 这通常是网络数据接收问题。
    1.  **检查网络连接**: 确保采集硬件的数据网线已连接到电脑。
    2.  **IP和端口配置**: 这是最常见的原因。打开 **[网络设置]**，**读取** 硬件参数。确认硬件的 **[目标IP]** 是您电脑当前的IP地址，**[目标端口]** 是您期望的端口。
    3.  **防火墙**: 检查Windows防火墙或任何第三方杀毒软件，确保它们没有阻止 WaveFragStudio 应用或其监听的UDP端口（例如默认的3860端口）的入站连接。
    4.  **硬件状态**: 检查采集硬件上的状态指示灯，确认其是否在正常工作并发送数据。

**Q5: 热图显示的位置好像不准。**
*   **A5**:
    1.  **麦克风文件**: 确认您加载了与当前使用的麦克风阵列完全匹配的位置文件。
    2.  **算法与声源**:
        *   如果您在定位一个持续的、单一频率的声音（如蜂鸣声），请使用 **频域算法** 并将 **目标频率** 设置为该声音的频率。
        *   如果您在定位一个宽频或突发的声音（如说话、敲击），请切换到 **时域算法**。
    3.  **环境反射**: 强烈的声反射会干扰定位精度。尽量在开阔或有吸音材料的环境中测试。

### **6. 重要注意事项**

1.  **硬件重启**: 每次通过 **[网络设置]** 或 **[滤波器参数设置]** 向硬件写入新配置后，都 **必须** 断电重启采集硬件，新配置才能生效。
2.  **防火墙设置**: 首次启动系统时，如果Windows防火墙弹出提示，请务必允许本应用（WaveFragStudio）通过网络通信。
3.  **许可证文件**: 成功激活后，请不要删除或移动软件目录下的 `license.key` 文件。如果丢失，需要重新激活。
4.  **麦克风文件格式**: 麦克风位置 `.csv` 文件必须是标准的逗号分隔格式，软件会读取第2列和第3列作为麦克风的X、Y坐标。
5.  **日志信息**: 当遇到任何问题时，请优先查看 **[系统日志]** 区的输出信息，它通常会给出问题所在的关键线索。

---
